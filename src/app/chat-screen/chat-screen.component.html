<div class="page-container">

    <aside class="side-bar">
        <div class="menu-top">
            <button class="button"(click)="novoChat()">+ New chat</button>

            @for (chat of chats; track $index){
            <button class="btn" (click)="onChatClick(chat)">
                <i class="fa-solid fa-trash-can"></i>
                {{ chat.chatTitle }}
            </button>
            }


        </div>
        <div class="menu-down">
            <a href=""><i class="fa-solid fa-trash-can"></i> Clear conversations</a>
            <a href=""><i class="fa-regular fa-sun"></i>Light mode</a>
            <a href=""><i class="fa-solid fa-user"></i>My account</a>
            <a href=""><i class="fa-solid fa-arrow-up-right-from-square"></i>Updates & FAQ</a>
            <button class="button" (click)="deslogar()">

                <i class="fa-solid fa-arrow-right-from-bracket"></i>Log out
            </button>

        </div>


    </aside>

    <main class="central-panel">

        @if (chatSelecionado == null) {

        <div class="logo"></div>

        <div class="dicas-container">


            <div class="dicas-item">
                <h2>
                    <i class="fa-regular fa-comments"></i>
                    Examples
                </h2>

                <p>"Explain quantum computing insimple terms"</p>
                <p>"Got any creative ideas for a 10year old's birthday?"</p>
                <p>"How do I make an HTTP requestin Javascript?"</p>
            </div>

            <div class="dicas-item">
                <h2>
                    <i class="fa-regular fa-star"></i>
                    Capabilities
                </h2>

                <p>"Remembers what user saidearlier in the conversation."</p>
                <p>"Allows user to provide follow-up corrections."</p>
                <p>"Trained to decline inappropriate requests."</p>
            </div>

            <div class="dicas-item">
                <h2>
                    <i class="fa-solid fa-user-shield"></i>
                    Limitations
                </h2>

                <p>"May occasionally generate incorrect information."</p>
                <p>"May occasionally produce harmful instructions or biased content."</p>
                <p>"Limited knowledge of world andevents after 2021."</p>
            </div>

        </div>

        }

        @if (chatSelecionado != null) {
            <!-- //so vai ser executado quando o usuario tiver clicado em um chat -->

        <div class="chat-container">

            <div class="chat-header">
                <h2>
                    {{ chatSelecionado.chatTitle }}
                </h2>

            </div>

            <div class="chat-messages">
                @for (msg of messages; track $index){
                <p class="message-item" [class.chatbot]="msg.userId == 'chatbot'">{{ msg.text }}</p>

                }
            </div>


        </div>
        <div class="message">
            <button aria-label="Send image">
                <i class="fa-solid fa-image"></i>
            </button>

            <input [formControl]="userMessage" type="text" placeholder="Type your message">
            <button aria-label="Send voice message">
                <i class="fa-solid fa-microphone"></i>
            </button>

            <button aria-label="Send message">
                <i class="fa-solid fa-paper-plane" (click)="sendMessage()"></i>
            </button>
        </div>
        }
    </main>
</div>